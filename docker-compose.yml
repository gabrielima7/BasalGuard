services:
  agent:
    build: .
    container_name: basalguard-agent
    stdin_open: true      # Keep STDIN open for interactive input()
    tty: true             # Allocate a pseudo-TTY for colored output
    networks:
      - basalnet
    volumes:
      - ./safe_workspace:/app/safe_workspace   # Persistent workspace
    environment:
      - GROQ_API_KEY=${GROQ_API_KEY:-}
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - OPENAI_BASE_URL=${OPENAI_BASE_URL:-https://api.groq.com/openai/v1}
      - OPENAI_MODEL=${OPENAI_MODEL:-llama-3.3-70b-versatile}

networks:
  basalnet:
    driver: bridge
